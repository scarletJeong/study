- [ ] garbage collector 
- [ ] 멀티태스킹
- [ ] 프로세스와 스레드 


- [x] Garbage Collector와 JVM 메모리 관리

# Garbage Collector와 JVM 메모리 관리

## 소개
JVM의 메모리 관리 방식과 Garbage Collector(GC)의 역할 및 작동 원리에 대해 정리함. 이를 통해 GC의 중요성을 이해하고, 메모리 누수 및 애플리케이션 성능 문제를 예방할 수 있음.

## 주요 학습 내용

### 1. Garbage Collector(GC)란?
- **정의**:
  - JVM에서 불필요한 메모리를 자동으로 해제하는 역할을 수행.
  - 개발자가 명시적으로 메모리 해제를 하지 않아도 JVM이 관리.

- **장점**:
  - 메모리 누수 방지.
  - 개발자는 애플리케이션 로직에만 집중 가능.

- **단점**:
  - 메모리 해제 시점을 예측할 수 없음.
  - GC 작동 중 애플리케이션이 멈추는 Stop-the-World(STW) 문제가 발생 가능.

---

### 2. JVM 메모리 구조

#### Heap 영역
- 동적으로 생성된 객체와 참조형 변수가 저장되는 공간.
- GC의 주요 대상.
- 생존 기간에 따라 물리적으로 영역을 나눔:

1. **Young Generation**:
   - 새로 생성된 객체가 할당.
   - 대부분의 객체는 이 영역에서 사라짐.
   - Young 영역에서의 GC를 Minor GC라 부름.

2. **Old Generation**:
   - Young 영역에서 살아남은 객체가 이동.
   - 크기가 크며 GC가 적게 발생.
   - Old 영역에서의 GC를 Major GC라 부름.

---

### 3. GC 동작 방식

#### 1. Stop-the-World
- GC 수행 중 모든 애플리케이션 스레드가 멈춤.
- STW 시간을 줄이는 것이 GC 성능 개선의 핵심.

#### 2. Mark and Sweep
- **Mark**: 사용 중인 객체와 그렇지 않은 객체를 식별.
- **Sweep**: 사용되지 않는 객체를 메모리에서 해제.

#### 3. Minor GC
- Young 영역의 메모리를 정리.
- **동작 순서**:
  1. 객체가 Eden 영역에 생성.
  2. Eden 영역이 꽉 차면 Minor GC 발생.
  3. 사용 중인 객체는 Survivor 영역으로 이동.
  4. 일정 횟수를 넘긴 객체는 Old 영역으로 이동 (Promotion).

#### 4. Major GC
- Old 영역의 메모리를 정리.
- 상대적으로 시간이 오래 걸리며 STW 발생.

---

### 4. GC 알고리즘

1. **Serial GC**:
   - 단일 스레드로 GC를 수행.
   - 기본 알고리즘: Mark-Sweep.
   - 적은 메모리와 단일 CPU 환경에서 적합.

2. **Parallel GC**:
   - Young 영역의 GC를 멀티스레드로 수행.
   - Old 영역은 단일 스레드로 처리.
   - Serial GC 대비 STW 시간이 감소.

3. **CMS GC (Concurrent Mark Sweep)**:
   - 애플리케이션 스레드와 GC 스레드가 동시에 실행.
   - STW 시간을 줄이지만, CPU 사용량이 높음.
   - 메모리 파편화 문제 발생 가능.

4. **G1 GC (Garbage First)**:
   - Young/Old 영역 대신 Heap을 Region으로 분할.
   - 메모리가 많이 찬 영역부터 우선적으로 GC 수행.
   - 효율적으로 객체를 재배치하여 메모리 파편화 해결.

5. **ZGC**:
   - 대량의 메모리를 Low Latency로 처리.
   - Heap 크기가 증가해도 STW 시간이 10ms를 넘지 않음.

---

## 깨달은 것

1. **GC의 역할**:
   - 메모리 관리를 자동화하여 개발자 생산성을 향상시키고 메모리 누수를 방지.
2. **JVM 메모리 관리의 중요성**:
   - Young/Old 영역의 분리와 GC 알고리즘 선택이 성능 최적화의 핵심.
3. **GC 튜닝의 필요성**:
   - STW 시간을 줄이고 애플리케이션의 성능 문제를 최소화하기 위해 적절한 GC 알고리즘을 선택해야 함.

GC와 JVM 메모리 관리를 이해함으로써 애플리케이션 성능을 개선할 수 있음.


[2024-02-25]
