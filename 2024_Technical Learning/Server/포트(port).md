# 포트(Port)와 Nginx를 통한 서비스 관리

## 개요

포트는 클라이언트가 네트워크 상에서 특정 서버 프로그램에 연결하기 위한 논리적인 접속 장소임. 포트 번호는 서버에서 실행 중인 프로그램을 구분하며, 다중 서비스를 운영하거나 특정 요청을 처리할 때 중요함. 이 문서에서는 포트의 기본 개념, 여러 서비스를 운영하는 방법, 그리고 Nginx를 사용한 포트 관리에 대해 설명함.

---

## 포트(Port)란?

### 정의
- **포트**:
  - 클라이언트 프로그램이 네트워크 상의 특정 서버 프로그램을 지정하는 방법.
  - 한 컴퓨터에서 여러 개의 서버가 실행 중일 때, 특정 서버에 접속하기 위해 포트 번호를 사용함.

### 포트 번호
- 서버를 구분하기 위한 16비트의 논리적 할당.
- **0 ~ 1023**: Well-known Port (미리 예약된 포트 번호).
- 웹서버 기본 포트: **80번**.

### 예시
1. **한 호스트에서 여러 서비스 운영**:
   - 웹서버가 80번 포트를 사용 중일 때, 또 다른 웹서버를 운영하려면 8080과 같은 다른 포트를 사용해야 함.
   - HTTP 프로토콜에서는 `http://localhost.com` 뒤에 `:80`이 생략되어 있음.

2. **도메인으로 서버 구분**:
   - 하나의 80번 포트를 사용하지만, 도메인에 따라 다른 서비스를 운영.
   - 예: `www.hostexample.com` (실서버)와 `www.test-hostexample.com` (테스트 서버).

3. **포트 번호로 서버 구분**:
   - 같은 도메인에서 다른 포트 번호로 서로 다른 서비스를 운영.
   - 예: `http://localhost:80` (기본 웹서버)와 `http://localhost:8080` (추가 웹서버).

---

## 주요 용어

- **서버**:
  - 서비스를 제공하는 컴퓨터.

- **호스트**:
  - 네트워크에 연결된 개별 장치 또는 서버.

- **포트**:
  - 서버에서 실행 중인 특정 프로그램을 구분하는 번호.

- **Nginx**:
  - 서버에서 포트와 호스트를 설정하여 웹 요청을 처리하는 프로그램.

---

## Nginx를 활용한 포트 및 서비스 관리

1. **포트 설정**:
   - Nginx는 특정 포트와 요청을 연결해주는 역할을 수행.
   - 예시 설정 파일 (`/etc/nginx/sites-available/default`):
     ```nginx
     server {
         listen 80;
         server_name www.hostexample.com;

         location / {
             proxy_pass http://127.0.0.1:3000;
         }
     }

     server {
         listen 8080;
         server_name www.test-hostexample.com;

         location / {
             proxy_pass http://127.0.0.1:4000;
         }
     }
     ```

2. **다중 서비스 운영**:
   - 포트를 다르게 설정하여 여러 웹 서버를 운영.
   - 80번 포트는 실서버, 8080번 포트는 테스트 서버로 활용 가능.

3. **서버 리로드 및 확인**:
   ```bash
   sudo nginx -t  # 설정 파일 테스트
   sudo systemctl reload nginx  # 설정 적용
   ```

---

## 깨달은 점

1. **포트 번호 활용**:
   - 80번 포트와 8080번 포트를 통해 다중 서비스를 구분하며 운영 가능.

3. **Nginx의 역할**:
   - 다중 도메인 및 다중 포트 서비스를 효과적으로 관리하고 요청을 처리하는 데 활용 가능.

4. **도메인과 포트 관리**:
   - 도메인 기반 또는 포트 기반 서비스를 분리하여 안정적이고 체계적인 서버 환경을 구성할 수 있음.

