
- [x] JavaScript vs JSP vs HTML
- [x] CASCADE 사용 이유 > 사용자탈퇴구현
- [x] UUID 사용이유
- [ ] 도메인 설정


### 1. JavaScript vs JSP (Java Server Pages)
   JavaScript : `<script>`태그 사용 , 프론트엔드 언어
     JSP :   `<% %>` 태그 사용 ,  서버 측 언어

`<script>`
	-  JavaScript를 실행하거나 불러오는 데만 사용됩니다.
	- JSP, PHP 같은 서버 사이드 언어는 `<script>` 태그를 사용하는 JavaScript와 데이터를 전달하거나 상호작용하는 역할을 합니다.

`<% %>`
	- JSP에서 Java 코드를 작성할 때 사용합니다.
	- Java 코드를 HTML 문서에 삽입하고, 동적으로 처리할 수 있습니다.
	.
	- JSP 태그 
		- `<% %>`   :  스크립트릿 _Java 코드 삽입
		- `<%= %>` :  표현식 _Java 표현식의 결과 출력
		- `<%! %>` :  선언문 _JSP내 멤버 변수나 메서드 선언 
				  `page, include, taglib
		- `<%@ %>` :  지시어 _JSP 설정/속성 정의
		- `<jsp:xxx>` : 액션 태그 _JSP 표준작업 처리
	 ```
```EX )
	<% String username = "John"; out.println("Hello, " + username + "!"); %>
	
    <p>현재 시간: <%= new java.util.Date() %></p>
	
	<%! 
		int sum(int a, int b) { 
			return a + b; 
		} 
	%> 
	<p>합계: <%= sum(5, 3) %></p>
	
	<%@ page language="java" contentType="text/html; charset=UTF-8" %>
	<%@ include file="header.jsp" %>
	<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
	
	<jsp:include page="header.jsp" />
	<jsp:forward page="nextPage.jsp" />
	<jsp:useBean id="user" class="com.example.User" />
```
/

#### `+` JavaScript vs JSP vs HTML

- HTML
>	- 웹 페이지의 구조 정의 언어
>	- 정적
>		- 사용자가 상호작용할 수 있는 동적인 기능은 포함하지 않음.

- JavaScript
>	- HTML 과 CSS에 동적인 기능을 추가하는 언어
>	- 동적
>		- 버튼 클릭, 데이터입력, 애니메이션 같은 사용자 상호작용을 처리함.


- JSP
>	- 서버에서 실행
>	- 동적
>		- HTML을 동적으로 생성하는 기술
>		- Java 기반이므로 데이터베이스와 상호작용하거나, 사용자 요청에 따라 데이터를 처리한 후 결과를 HTML로 렌더링할 수 있습니다.
>		- HTML, CSS, JavaScript 코드와 함께 Java 코드를 삽입하여 사용할 수 있습니다.



| 구분        | 정적                    | 동적                          |
| --------- | --------------------- | --------------------------- |
| 기술        | HTML, CSS, JavaScript | JSP, PHP, Node.js, Python.. |
| 콘텐츠 생성 위치 | 클라이언트(브라우저)           | 서버                          |
| 콘텐츠 변화    | 항상 동일한 HTML제공         | 요청에 따라 HTML콘텐츠가 달라짐         |
| DB 연결     | x                     | o                           |
| ex        | 회사 소개 페이지,            | 게시판, 전자상거래 사이트..            |





### 2. CASCADE
- DB에서 외래키(Foreign key)에 연결된 행이 참조하는 부모테이블에서 특정 작업(DELETE, UPDATE)이 발생할 때, 자식 테이블에서도 자동으로 해당 작업을 수행하도록 설정하는 옵션.
	-ON DELETE CASCADE  
	-ON UPDATE CASCADE

`-`CASCADE 사용 이유
	- 참조 무결성 유지
	- 수작업 감소
	- 데이터 일관성


#### CASCADE 사용하지 않는 이유

1. 데이터 관리 제어권 부족
>	- CASCADE를 사용하면 DB가 자동으로 참조 데이터를 삭제/업데이트를 
>	- 중요한 데이터가 의도치 않게 삭제되거나 변경될 위험이 있음.
>		- 부모테이블에서 데이터를 삭제했을 때, 예상치 못한 자식 테이블 데이터 손실 발생 가능
>	- 데이터 삭제나 변경 시 로그를 남기거나 별도로 검토할 필요가 있으면 CASCADE가 방해함.
>	- 비즈니스 로직에 따라 일부 데이터는 유지하고 일부나 삭제해야 할 수도 있음.

2. 논리적 삭제 선호
>	- 데이터가 삭제되는 대신, 사용되지 않는 상태로 남아야할 경우가 많음
>		- 사용자가 탈퇴하더라도 구매이력, 로그 기록 등을 보존해야할 필요가 있음.
>		  
>	- 논리적 삭제 장점
>		- 데이터 복구 가능 : 실수로 삭제된 데이터라도 플래그변경하면 복구 가능
>		- 데이터 이력 추적
>		- 예측 가능한 동작 : CASCADE는 숨겨진 동작이 많아 디버깅이 어려운 반면, 논리적 삭제는 명식적으로 처리 가능.

3. DB 퍼포먼스
>	- CASCADE는 부모-자식 테이블 간의 데이터 일관성을 위해 추가적인 연산 비용 발생
>	- 대규모 DB에서 CASCADE가 많은 자식테이블에 영향을 미칠 경우 성능 저하 기능
>	- 외래 키 관계가 복잡하게 엵혀 있을수록, CASCADE실행 시 잠금(lock)이나 대기 시간이 길어짐
>	- 이메일은 일반적으로 문자열이고 길이가 길 수 있어 기본 키로 사용할 경우 인덱싱 성능이 떨어질 수 있음.

4. 데이터 변경 가능성
>	-  일부 데이터(ex_ email)은 변경 가능성이 높음
>		- EMAIL을 외래키로 사용하지 않는 이유
>			- 이메일은 사용자가 변경할 수 있는 데이터
>			- 변경 시 CASCADE로 인해 대량의 참조데이터가 업데이트되어야 하므로, 성능 및 데이터베이스 무결성 문제가 발생할 가능성 있음
>			- 대안으로 변하지 않는 고유값 (UUID) 를 외캐키로 사용.

5. 보안 및 개인정보 보호
>	- 탈퇴 시 특정 이메일로 변경한다고 해도, 여전히 기존 데이터는 간접적으로 식별될 수 있는 위험이 있음.


#### UUID를 사용하는 이유
`Universally Unique Identifier _ 고유 식별자`

1. 데이터 무결성
>	- UUID는 고유 식별자로 설계 시 변경되지 않는 값으로 간주됨.
>	- UUID는 고유성을 보장하므로, DB나 여러 분산시스템을 병합할 때 중복될 가능성이 매우 낮음.
>		- 서로 다른 DB에서 생성된 데이터라도 같은 UUID를 가지지 않음.

2. 데이터베이스 독립성
>	- UUID는 데이터베이스의 관계를 유지하는 데 더 중점을 둡니다
>	- 데이터가 다른 시스템으로 이동하거나 복제될 때, ID충돌을 방지 할 수 있음.
>		- 두 개의 서로 다른 서비스에서 생성된 데이터를 병합해도 UUID는 고유함.
>	- 기본키가 숫자로 되어 있는 경우, DB 병합 시 ID충돌을 방지할려면 재정렬이 필요하지만 UUID는 이를 방지함.

3. 보안 = 익명성 보장
>	- 숫자 기반의 순차 ID, email은 예측이 가능하지만 UUID는 난수기반으로 예측하기 어려움.
>	- 보안상의 이유로 공개 API등에서 순차ID보다  안전함.

4. 효율성
>	- UUID는 정해진 크기(16바이트)로 고정되어 있어 인덱싱과 검색 효율이 이메일보다 높습니다.


```
User table
CREATE TABLE User ( 
		id UUID PRIMARY KEY, 
		email VARCHAR(255) UNIQUE NOT NULL, 
		name VARCHAR(100) 
		);

User-Profile table
CREATE TABLE UserProfile ( 
		id UUID PRIMARY KEY, 
		user_id UUID REFERENCES User(id) , 
		height FLOAT, 
		weight FLOAT 
		);
```



AWS에서 ip연결하면 되는거지 _ 도메인 등록기ㄴ관에 ip입렵



![[Pasted image 20241119174100.png]]